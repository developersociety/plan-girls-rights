(function(t){function e(e){for(var n,a,r=e[0],l=e[1],c=e[2],h=0,p=[];h<r.length;h++)a=r[h],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&p.push(s[a][0]),s[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,r=1;r<i.length;r++){var l=i[r];0!==s[l]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},s={app:0},o=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var n=i("85ec"),s=i.n(n);s.a},"1f9f":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("section",{staticClass:"main"},[i("h1",{staticClass:"title"},[t._v("Girls’ rights in the UK")]),t._m(0),i("div",{staticClass:"map",attrs:{id:"map"}},[i("div",{attrs:{id:"legend"}},[i("svg",{attrs:{width:"32px",fill:"#000000",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 32 50.036","enable-background":"new 0 0 100 100",xmlns:"http://www.w3.org/2000/svg","xmlns:bx":"https://boxy-svg.com"}},[i("circle",{staticStyle:{fill:"rgb(255, 255, 255)"},attrs:{cx:"16",cy:"21",r:"9.625"}}),i("g",{attrs:{transform:"matrix(0.440792, 0, 0, 0.440792, -6.039605, 4.79604)"}},[i("path",{staticStyle:{fill:"rgb(245, 219, 55)"},attrs:{d:"M50,5C32.459,5,18.239,19.22,18.239,36.761C18.239,54.302,50,95,50,95s31.761-40.698,31.761-58.239   C81.761,19.22,67.541,5,50,5z M50.183,56.702c-11.206,0-20.29-9.084-20.29-20.29c0-11.205,9.084-20.289,20.29-20.289   c11.206,0,20.289,9.084,20.289,20.289C70.473,47.618,61.389,56.702,50.183,56.702z"}})]),i("text",{staticStyle:{"white-space":"pre",fill:"rgb(51, 51, 51)","font-family":"Oswald","font-size":"14.3px","text-anchor":"middle"},attrs:{x:"15.993",y:"26.593"}})]),t._v(" number of girls stories ")])]),i("div",{staticClass:"search-form"},[i("div",{staticClass:"search"},[i("dropdown",{attrs:{title:"Filter stories by location",items:t.locations},on:{change:t.onLocationChange}})],1)]),i("p",{staticClass:"explain"},[t._v("Text to explain search functionality goes here.")]),i("tags-component",{attrs:{tags:t.availableTags,values:t.tags},on:{input:t.onTagsChange,reset:t.resetFilter}})],1),t.itemsToShowInPopUp.length>0?i("popup",{attrs:{items:t.itemsToShowInPopUp,geoJson:t.geoJson,center:t.popupMapCenter},on:{close:function(e){t.itemsToShowInPopUp=[]},clickOnTag:t.onTagsChange}}):t._e()],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"text"},[t._v(" Across the UK, girls are saying loud and clear that their rights aren’t being met. From street harassment to stereotyping and feeling unsafe at school and online, they’re facing the daily reality of gender inequality in the UK. Explore the map to discover the issues they’ve told us matter the most to them. "),i("b",[t._v("Type in your location to see the stories nearest your area or click a pin on the map to find out more.")])])}],a=(i("4de4"),i("c975"),i("d81d"),i("acd8"),i("1276"),i("498a"),i("159b"),i("e11e")),r=(i("2573"),i("369b")),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tags-wrapper"},[i("h3",{staticClass:"title"},[t._v(" Filter stories by theme ")]),i("div",{staticClass:"tags"},[t._l(t.tags,(function(e,n){return i("button",{key:n,class:{"tag-active":t.selected.indexOf(e)>=0,tag:!0},attrs:{type:"button"},on:{click:function(i){return t.clickOnTag(e)}}},[t._v(" "+t._s(e)+" ")])})),i("button",{staticClass:"tag-reset tag",attrs:{type:"button"},on:{click:function(e){return t.$emit("reset")}}},[t._v("Reset")])],2)])},c=[],u=(i("a434"),i("d3b7"),i("ddb0"),{name:"tags",props:{values:Array,tags:Array},data:function(){return{selected:[]}},watch:{values:function(t){this.values&&(this.selected=this.values)},selected:function(){this.$emit("input",this.selected)}},mounted:function(){this.values&&(this.selected=this.values)},computed:{},methods:{clickOnTag:function(t){var e=this.selected.indexOf(t);e<0?this.selected.push(t.trim().toLowerCase()):this.selected.splice(e,1)},selectAll:function(){var t=this;this.allSelected?this.selected=[]:(this.selected=[],this.tags.forEach((function(e){t.selected.push(e)})))}}}),h=u,p=(i("65f01"),i("2877")),d=Object(p["a"])(h,l,c,!1,null,null,null),f=d.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[i("div",{staticClass:"popup-container"},[i("div",{staticClass:"close-btn",on:{click:t.close}},[i("span",[t._v("Back to map")]),i("button",[i("svg",{staticClass:"close",attrs:{width:"100%",viewBox:"0 0 22 22",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[i("g",{attrs:{id:"Desktop_Story",transform:"translate(-715.000000, -33.000000)",fill:"#FFFFFF","fill-rule":"nonzero"}},[i("g",{attrs:{id:"Overlay"}},[i("g",{attrs:{id:"Close",transform:"translate(706.000000, 24.000000)"}},[i("path",{attrs:{d:"M26.7037037,31 C27.1666667,31 27.6296296,30.8148148 27.962963,30.4814815 L30.4814815,27.962963 C30.8148148,27.6296296 31,27.1666667 31,26.7037037 C31,26.2407407 30.8148148,25.7777778 30.4814815,25.4444444 L25.037037,20 L30.4814815,14.5555556 C30.8148148,14.2222222 31,13.7592593 31,13.2962963 C31,12.8333333 30.8148148,12.3703704 30.4814815,12.037037 L27.962963,9.51851852 C27.6296296,9.18518519 27.1666667,9 26.7037037,9 C26.2407407,9 25.7777778,9.18518519 25.4444444,9.51851852 L20,14.962963 L14.5555556,9.51851852 C14.2222222,9.18518519 13.7592593,9 13.2962963,9 C12.8333333,9 12.3703704,9.18518519 12.037037,9.51851852 L9.51851852,12.037037 C9.18518519,12.3703704 9,12.8333333 9,13.2962963 C9,13.7592593 9.18518519,14.2222222 9.51851852,14.5555556 L14.962963,20 L9.51851852,25.4444444 C9.18518519,25.7777778 9,26.2407407 9,26.7037037 C9,27.1666667 9.18518519,27.6296296 9.51851852,27.962963 L12.037037,30.4814815 C12.3703704,30.8148148 12.8333333,31 13.2962963,31 C13.7592593,31 14.2222222,30.8148148 14.5555556,30.4814815 L20,25.037037 L25.4444444,30.4814815 C25.7777778,30.8148148 26.2407407,31 26.7037037,31 Z"}})])])])])])])]),i("div",{staticClass:"modal-map"},[i("div",{attrs:{id:"popup-map"}})]),t.item?i("section",{staticClass:"modal"},[i("div",[t.items.length>1?i("div",{staticClass:"transition"},[t.counter>0?i("button",{staticClass:"btn btn-orange btn-transition",on:{click:function(e){t.counter--}}},[i("span",[t._v("Previous")]),t.isMobile?t._e():i("span",[t._v(" story")])]):t._e(),i("span",{staticClass:"counter"},[t._v(t._s(t.counter+1)+" of "+t._s(t.items.length))]),t.counter<t.items.length-1?i("button",{staticClass:"btn btn-orange btn-transition",on:{click:function(e){t.counter++}}},[i("span",[t._v("Next")]),t.isMobile?t._e():i("span",[t._v(" story")])]):t._e()]):t._e(),i("div",{staticClass:"top"},[i("h1",{staticClass:"title"},[t._v(t._s(t.item.name)+", "+t._s(t.item.age))]),i("h3",{staticClass:"title"},[t._v(t._s(t.item.location))])]),t.item.youtubeURL?i("div",{staticClass:"video"},[i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"play",on:{click:[function(e){t.visible=!t.visible},t.playVideo]}})]),i("youtube",{ref:"youtube",attrs:{"video-id":t.getId(t.item.youtubeURL),showinfo:"0"}})],1):t._e(),t.item.photoURL&&t.item.photoURL.length>0?i("img",{staticClass:"photo",attrs:{src:t.item.photoURL,alt:"photo"}}):t._e(),i("div",{staticClass:"text",domProps:{innerHTML:t._s(t.item.text)}}),t.item.callToAction&&t.item.callToAction.text?i("a",{staticClass:"btn btn-red",attrs:{href:t.item.callToAction.url,target:"_blank"}},[t._v(" "+t._s(t.item.callToAction.text)+" ")]):t._e(),i("div",{staticClass:"tags-wrapper"},[i("div",{staticClass:"tags"},t._l(t.themeTags,(function(e,n){return i("button",{key:n,staticClass:"tag tag-active",attrs:{type:"button"},on:{click:function(i){t.$emit("clickOnTag",[e.trim().toLowerCase()])}}},[t._v(t._s(e))])})),0)])])]):t._e()])])},g=[],v={name:"Popup",props:{items:Array,geoJson:Object,center:Array},data:function(){return{map:void 0,visible:!0,counter:0,marker:void 0}},mounted:function(){this.map=a["map"]("popup-map",{continuousWorld:!0,zoomControl:!1,dragging:!1,scrollWheelZoom:!1,static:!0}).setView(this.center?this.center:[54.904571379248125,-3.436872187499991],7.5),a["geoJson"](this.geoJson,{clickable:!0}).addTo(this.map),this.updateMarker()},watch:{center:function(){this.updateMarker()},items:function(){this.updateMarker()}},methods:{updateMarker:function(){this.map&&(this.marker&&this.map.removeLayer(this.marker),this.marker=a["marker"](this.center,{icon:a["divIcon"]({html:'<svg width="32px" fill="#000000" version="1.1" x="0px" y="0px" viewBox="0 0 32 50.036" enable-background="new 0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:bx="https://boxy-svg.com"><circle style="fill: rgb(255, 255, 255);" cx="16" cy="21" r="9.625"/><g transform="matrix(0.440792, 0, 0, 0.440792, -6.039605, 4.79604)"><path d="M50,5C32.459,5,18.239,19.22,18.239,36.761C18.239,54.302,50,95,50,95s31.761-40.698,31.761-58.239   C81.761,19.22,67.541,5,50,5z M50.183,56.702c-11.206,0-20.29-9.084-20.29-20.29c0-11.205,9.084-20.289,20.29-20.289   c11.206,0,20.289,9.084,20.289,20.289C70.473,47.618,61.389,56.702,50.183,56.702z" style="fill: rgb(245, 219, 55); fill-opacity: 1;"/></g><text x="15.993" y="26.593" style="white-space: pre; fill: rgb(51, 51, 51); font-size: 14.3px; text-anchor: middle;">'+this.items.length+"</text></svg>",iconSize:new a["Point"](32,50)})}).addTo(this.map),this.map.panTo(new a["LatLng"](this.center[0],this.center[1])))},getId:function(t){return this.$youtube.getIdFromUrl(t)},playVideo:function(){this.player.playVideo()},stopVideo:function(){this.player.stopVideo()},close:function(){this.$emit("close")}},computed:{isMobile:function(){return window.innerWidth<=768},player:function(){return this.$refs.youtube.player},item:function(){return this.items[this.counter]?this.items[this.counter]:null},themeTags:function(){return this.item?this.item.themeTags.split(","):[]}}},w=v,b=(i("7aac"),Object(p["a"])(w,m,g,!1,null,"4dced867",null)),x=b.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dropdown"},[i("a",{ref:"dropdownButton",staticClass:"input dropdown-button",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.isShowing=!t.isShowing}}},[t._v(t._s(t.value)+" "),i("svg",{class:{down:!t.isShowing},attrs:{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"}},[i("polygon",{attrs:{points:"7.302 12.227 9.578 14.546 16 8 9.578 1.454 7.302 3.772 9.841 6.361 0 6.361 0 9.64 9.841 9.64",fill:"#000000","fill-rule":"evenodd"}})])]),i("ul",{class:{show:t.isShowing}},[i("li",{class:{active:-1==t.selected}},[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.setIndex(-1)}}},[t._v(" Any ")])]),t._l(t.items,(function(e,n){return i("li",{key:n,class:{active:t.selected==n}},[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.setIndex(n)}}},[t._v(" "+t._s(e)+" ")])])}))],2)])},C=[],_={name:"Dropdown",props:{title:String,items:Array},data:function(){return{isShowing:!1,selected:void 0}},computed:{value:function(){return this.selected>=0&&this.items[this.selected]?this.items[this.selected]:this.title}},mounted:function(){var t=this;document.body.addEventListener("click",(function(e){e.target!=t.$refs.dropdownButton&&(t.isShowing=!1)}))},methods:{setIndex:function(t){this.selected=t,this.isShowing=!1,this.$emit("change",this.items[this.selected])}}},k=_,T=(i("cdd3"),Object(p["a"])(k,y,C,!1,null,"6b5aefbd",null)),S=T.exports,L={name:"app",components:{popup:x,"tags-component":f,dropdown:S},data:function(){return{config:void 0,geoJson:void 0,map:null,tags:[],items:[],itemsToShow:[],itemsToShowInPopUp:[],popupMapCenter:void 0,markerClusterGroup:void 0,showModalMap:!1,autocompleteResults:[]}},watch:{itemsToShow:function(){console.log(this.itemsToShow),this.showMarkers()}},computed:{zoomLevel:function(){return window.innerWidth<768?4.8:5.8},availableTags:function(){var t=[];return this.items.length>0&&this.items.forEach((function(e){if(e&&e.themeTags){var i=e.themeTags.split(",");i.forEach((function(e){e=e.trim().toLowerCase(),t.indexOf(e)<0&&t.push(e)}))}})),t},locations:function(){var t=[];return this.items.length>0&&this.items.forEach((function(e){t.indexOf(e.location)<0&&t.push(e.location)})),t}},mounted:function(){var t=this;this.get("config.json",(function(e){t.config=t.validateJsonString(e),t.config?t.init():alert("Wrong config.json file! Unable to parse JSON!")}))},methods:{onLocationChange:function(t){this.location=t,this.filter()},onTagsChange:function(t){this.itemsToShowInPopUp.length>0&&(this.itemsToShowInPopUp=[]),this.tags=t,this.filter()},filter:function(){var t=this;this.itemsToShow=this.items.filter((function(e){var i=!0;return i=!t.location||!t.location.length||!(!e.location||e.location!=t.location),i&&t.filterItemByTags(e)}))},filterItemByTags:function(t){var e=this;if(this.tags&&this.tags.length>0){var i=!1,n=t.themeTags.split(",");return n.forEach((function(t){t=t.trim().toLowerCase(),e.tags.indexOf(t)>=0&&(i=!0)})),i}return!0},resetFilter:function(){this.tags=[],this.location=void 0,this.$children[0].setIndex(-1)},showMarkers:function(){var t=this;if(!this.map)return!1;this.markerClusterGroup&&(this.map.removeLayer(this.markerClusterGroup),this.markerClusterGroup=void 0),this.itemsToShow.length>0&&(this.markerClusterGroup=a["markerClusterGroup"]({iconCreateFunction:function(t){return a["divIcon"]({html:'<svg width="32px" fill="#000000" version="1.1" x="0px" y="0px" viewBox="0 0 32 50.036" enable-background="new 0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:bx="https://boxy-svg.com"><circle style="fill: rgb(255, 255, 255);" cx="16" cy="21" r="9.625"/><g transform="matrix(0.440792, 0, 0, 0.440792, -6.039605, 4.79604)"><path d="M50,5C32.459,5,18.239,19.22,18.239,36.761C18.239,54.302,50,95,50,95s31.761-40.698,31.761-58.239   C81.761,19.22,67.541,5,50,5z M50.183,56.702c-11.206,0-20.29-9.084-20.29-20.29c0-11.205,9.084-20.289,20.29-20.289   c11.206,0,20.289,9.084,20.289,20.289C70.473,47.618,61.389,56.702,50.183,56.702z" style="fill: rgb(245, 219, 55);"/></g><text x="15.993" y="26.593" style="white-space: pre; fill: rgb(51, 51, 51); font-size: 14.3px; text-anchor: middle;">'+t.getChildCount()+"</text></svg>",iconSize:new a["Point"](32,50)})},singleMarkerMode:!0,spiderfyOnMaxZoom:!1,showCoverageOnHover:!1,zoomToBoundsOnClick:!1}),this.itemsToShow.forEach((function(e){var i=a["marker"]([e.coordinates.lat,e.coordinates.lng],{index:e.index}).on("click",(function(e){if(t.items[e.sourceTarget.options.index]){t.itemsToShowInPopUp=[t.items[e.sourceTarget.options.index]];var i=t.items[e.sourceTarget.options.index].coordinates;t.popupMapCenter=[i.lat,i.lng]}else console.log("wrong index")}));t.markerClusterGroup.addLayer(i)})),this.markerClusterGroup.on("clusterclick",(function(e){var i=e.layer.getAllChildMarkers(),n=[];i.forEach((function(e){t.items[e.options.index]?n.push(t.items[e.options.index]):console.log("wrong index")})),t.itemsToShowInPopUp=t.shuffle(n),t.popupMapCenter=[e.latlng.lat,e.latlng.lng]})),this.map.addLayer(this.markerClusterGroup))},init:function(){var t=this;this.get(this.config.geoJSONPath,(function(e){t.geoJson=t.validateJsonString(e),t.geoJson&&(t.initMap(),t.loadData(),t.showMarkers())}))},loadData:function(){var t=this;this.get(this.config.CSVPath,(function(e){var i,n=r["parse"](e),s=[];if(n){for(var o=1;o<n.data.length;o++){i=n.data[o];var a=parseFloat(+i[4]),l=parseFloat(+i[5]);isNaN(a)||isNaN(l)||s.push({index:o-1,name:i[0],age:i[1],location:i[2],region:i[3],coordinates:{lat:parseFloat(+i[4]),lng:parseFloat(+i[5])},themeTags:i[6],photoURL:i[7],youtubeURL:i[8],text:i[9],callToAction:{url:i[10],text:i[11]}})}t.items=s,t.itemsToShow=t.items}}))},initMap:function(){this.map=a["map"]("map",{zoomLevel:this.zoomLevel,maxZoom:this.zoomLevel,continuousWorld:!0,zoomControl:!1,dragging:!1,touchZoom:!1,doubleClickZoom:!1,boxZoom:!1,tap:!1,scrollWheelZoom:!1,static:!0}).setView([54.904571379248125,-3.436872187499991],this.zoomLevel);a["geoJson"](this.geoJson,{clickable:!0}).addTo(this.map)},shuffle:function(t){var e,i,n=t.length;while(0!==n)i=Math.floor(Math.random()*n),n-=1,e=t[n],t[n]=t[i],t[i]=e;return t},get:function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&200===i.status&&e(i.responseText)},i.open("GET",t,!0),i.send()},validateJsonString:function(t){var e=!1;try{e=JSON.parse(t)}catch(i){return!1}return e}}},M=L,O=(i("034f"),Object(p["a"])(M,s,o,!1,null,null,null)),P=O.exports,z=i("e0ec"),U=i.n(z);n["a"].config.productionTip=!1,n["a"].use(U.a),new n["a"]({render:function(t){return t(P)}}).$mount("#app")},"65f01":function(t,e,i){"use strict";var n=i("f725"),s=i.n(n);s.a},"7aac":function(t,e,i){"use strict";var n=i("1f9f"),s=i.n(n);s.a},"85ec":function(t,e,i){},"8ab4":function(t,e,i){},cdd3:function(t,e,i){"use strict";var n=i("8ab4"),s=i.n(n);s.a},f725:function(t,e,i){}});
//# sourceMappingURL=app.eac61f91.js.map